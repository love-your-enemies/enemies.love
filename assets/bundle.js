(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";require("./lib/polyfills");require("./lib/mixins");var _domready=require("domready");var _domready2=_interopRequireDefault(_domready);var _page=require("page");var _page2=_interopRequireDefault(_page);var _dom=require("dom");var _dom2=_interopRequireDefault(_dom);var _domify=require("domify");var _domify2=_interopRequireDefault(_domify);var _home=require("./routes/home");var _home2=_interopRequireDefault(_home);var _register=require("./routes/register");var _register2=_interopRequireDefault(_register);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}(0,_domready2.default)(function(){var mainSelector="[data-main]";var page=(0,_dom2.default)(".page");var main=(0,_dom2.default)(mainSelector);var nav=(0,_dom2.default)(".nav");(0,_page2.default)("*",transition);(0,_page2.default)("/",_home2.default);(0,_page2.default)("/schedule",_home2.default);(0,_page2.default)("/register",_register2.default);_page2.default.start();function transition(ctx,next){if(ctx.init){_page2.default.prev=ctx;next();return}if(isSamePath(ctx.path,_page2.default.prev.path)){next();return}page.addClass("page-transition");fetch(ctx.path).then(function(res){return res.text()}).then(handleResponse).then(function(_){return next()}).then(function(_){return _page2.default.prev=ctx}).catch(function(err){console.error(err);window.location.pathname=ctx.path});function handleResponse(res){var html=(0,_dom2.default)((0,_domify2.default)(res));return new Promise(function(resolve,reject){setTimeout(function(){var prevId=(0,_dom2.default)('meta[property="page:id"]').attr("content");var id=html.find('meta[property="page:id"]').attr("content");document.title=html.find("title").text();(0,_dom2.default)('meta[property="page:id"]').attr("content",id);page.removeClass("page-"+prevId);page.addClass("page-"+id);nav.find(".active").removeClass("active");nav.find('[data-id="'+id+'"]').addClass("active");var content=html.find(mainSelector);main.html(content.html());window.scrollTo(0,0);page.removeClass("page-transition");resolve()},300)})}}});function isSamePath(curr,prev){if(curr===prev)return true;if(curr==="/"&&prev==="/schedule/")return true;if(curr==="/schedule/"&&prev==="/")return true;return false}},{"./lib/mixins":2,"./lib/polyfills":4,"./routes/home":7,"./routes/register":8,dom:14,domify:22,domready:23,page:27}],2:[function(require,module,exports){"use strict";var _dom=require("dom");var _matches=require("dom/lib/matches");var _matches2=_interopRequireDefault(_matches);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}_dom.List.prototype.node=function(){return this[0]};_dom.List.prototype.closest=function(selector){var els=[];for(var i=0;i<this.length;++i){els.push(closest(this[i],selector))}return new _dom.List(els)};function closest(el,selector){if(typeof el.closest==="function"){return el.closest(selector)}while(el){if((0,_matches2.default)(el,selector))break;el=el.parentNode}return el}},{dom:14,"dom/lib/matches":19}],3:[function(require,module,exports){"use strict";exports.__esModule=true;exports.default=function(){return true}},{}],4:[function(require,module,exports){"use strict";require("es6-promise").polyfill();require("whatwg-fetch")},{"es6-promise":25,"whatwg-fetch":33}],5:[function(require,module,exports){"use strict";exports.__esModule=true;var _page=require("page");var _page2=_interopRequireDefault(_page);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}_page2.default.prev=new _page2.default.Context("/");exports.default=_page2.default},{page:27}],6:[function(require,module,exports){"use strict";exports.__esModule=true;var _payment=require("payment");var _payment2=_interopRequireDefault(_payment);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var isEmail=/\S+@\S+\.\S+/;exports.default={ticketType:function ticketType(input){var val=input.trim();if(val!=="student"&&val!=="standard")return false;return true},name:function name(input){var val=input.trim();if(val.length<3)return false;if(val.length>140)return false;return true},email:function email(input){var val=input.trim();if(val.length<3)return false;if(!isEmail.test(val))return false;return true},studentId:function studentId(input){var val=input.trim();if(val.length<3)return false;return true},cardName:function cardName(input){var val=input.trim();if(val.length<3)return false;return true},cardNumber:function cardNumber(input){var val=input.trim();if(val.length<3)return false;if(!_payment2.default.fns.validateCardNumber(val))return false;return true},expMonth:function expMonth(input){var val=input.trim();if(!val.length)return false;return true},expYear:function expYear(input){var val=input.trim();if(!val.length)return false;return true},cvcNumber:function cvcNumber(input){return true}}},{payment:29}],7:[function(require,module,exports){"use strict";exports.__esModule=true;exports.default=function(ctx){var nav=(0,_dom2.default)(".nav");var intro=(0,_dom2.default)(".section-intro");var schedule=(0,_dom2.default)(".section-schedule");var prev=_router2.default.prev;if((isHome(prev.path)||isSchedule(prev.path))&&isSchedule(ctx.path)&&!ctx.init){scrollTo(schedule);nav.find(".active").removeClass("active");nav.find('[data-id="schedule"]').addClass("active")}else if((isHome(prev.path)||isSchedule(prev.path))&&isHome(ctx.path)&&!ctx.init){scrollTo(intro);nav.find(".active").removeClass("active");nav.find('[data-id="home"]').addClass("active")}else if(isSchedule(ctx.path)&&!ctx.init){jumpTo(schedule)}};var _dom=require("dom");var _dom2=_interopRequireDefault(_dom);var _scrollTo=require("scroll-to");var _scrollTo2=_interopRequireDefault(_scrollTo);var _router=require("../lib/router");var _router2=_interopRequireDefault(_router);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var isHome=function isHome(path){return/^\/$/g.test(path)};var isSchedule=function isSchedule(path){return/schedule/g.test(path)};var animationOpts={ease:"outExpo",duration:800};var scrollTo=function scrollTo(el){return(0,_scrollTo2.default)(0,el.offset().top,animationOpts)};var jumpTo=function jumpTo(el){return window.scrollTo(0,el.offset().top)}},{"../lib/router":5,dom:14,"scroll-to":32}],8:[function(require,module,exports){"use strict";exports.__esModule=true;exports.default=function(ctx){Stripe.setPublishableKey("pk_test_VZPVSdywILB4qPH8LYdsw5il");var $form=(0,_dom2.default)(".form");var $tickets=(0,_dom2.default)(".ticket-type");var $submit=(0,_dom2.default)(".form-submit-button");var $errors=(0,_dom2.default)(".payment-errors");var $inputs={ticketType:(0,_dom2.default)('input[name="ticket_type"]'),name:(0,_dom2.default)('input[name="name"]'),email:(0,_dom2.default)('input[name="email"]'),studentId:(0,_dom2.default)('input[name="student_id"]'),cardName:(0,_dom2.default)("#card_name"),cardNumber:(0,_dom2.default)("#card_number"),expMonth:(0,_dom2.default)("#exp_month"),expYear:(0,_dom2.default)("#exp_year"),cvcNumber:(0,_dom2.default)("#cvc_number")};var $show={ticketTypeStudent:(0,_dom2.default)('[data-show="ticket_type:student"]')};var $bind={price:(0,_dom2.default)('[data-bind="price"]')};_payment2.default.formatCardNumber($inputs.cardNumber.node());_payment2.default.formatCardExpiryMultiple($inputs.expMonth.node(),$inputs.expYear.node());_payment2.default.formatCardCVC($inputs.cvcNumber.node());$tickets.on("click",onSetTicketType);$form.on("submit",onSubmit);function onSubmit(e){e.preventDefault();var isValid=true;$form.removeClass("form--has-errors");Object.keys($inputs).forEach(function(key){var $input=$inputs[key];var $field=$input.closest(".form-field");var value=$input.value();var validation=_validations2.default[key]||_noop2.default;if($field.hasClass("hidden"))return;if(validation(value)){$field.removeClass("form-field--error");return}isValid=false;$field.addClass("form-field--error")});if(!isValid){$form.addClass("form--has-errors");return}(0,_dom2.default)("input[id]").forEach(function(el){return el.setAttribute("disabled","")});$tickets.css("pointer-events","none");$submit.css("pointer-events","none");$submit.addClass("form-submit-button--loading");Stripe.card.createToken($form.node(),onStripeResponse)}function onSetTicketType(e){e.preventDefault();var $el=(0,_dom2.default)(this);var type=$el.data("value");$tickets.removeClass("active");$el.addClass("active");$inputs.ticketType.value(type);$bind.price.text(pricing[type]);$show.ticketTypeStudent.forEach(function(el){var $el=(0,_dom2.default)(el);if(type!=="student"){$el.addClass("hidden")}else{$el.removeClass("hidden")}})}function onStripeResponse(status,res){if(res.error){$submit.css("pointer-events","auto");return}var token=res.id;var tokenField=(0,_dom2.default)('<input type="hidden" name="stripe_token" value="'+token+'" />');$form.append(tokenField);$form.submit()}};var _dom=require("dom");var _dom2=_interopRequireDefault(_dom);var _payment=require("payment");var _payment2=_interopRequireDefault(_payment);var _validations=require("../lib/validations");var _validations2=_interopRequireDefault(_validations);var _noop=require("../lib/noop");var _noop2=_interopRequireDefault(_noop);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var pricing={standard:40,student:20}},{"../lib/noop":3,"../lib/validations":6,dom:14,payment:29}],9:[function(require,module,exports){var type;try{type=require("component-type")}catch(_){type=require("type")}module.exports=clone;function clone(obj){switch(type(obj)){case"object":var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy;case"array":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case"regexp":var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags);case"date":return new Date(obj.getTime());default:return obj}}},{"component-type":13,type:13}],10:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],11:[function(require,module,exports){exports=module.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||fallback;var prev=(new Date).getTime();function fallback(fn){var curr=(new Date).getTime();var ms=Math.max(0,16-(curr-prev));var req=setTimeout(fn,ms);prev=curr;return req}var cancel=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;exports.cancel=function(id){cancel.call(window,id)}},{}],12:[function(require,module,exports){var Emitter=require("emitter");var clone=require("clone");var type=require("type");var ease=require("ease");module.exports=Tween;function Tween(obj){if(!(this instanceof Tween))return new Tween(obj);this._from=obj;this.ease("linear");this.duration(500)}Emitter(Tween.prototype);Tween.prototype.reset=function(){this.isArray="array"===type(this._from);this._curr=clone(this._from);this._done=false;this._start=Date.now();return this};Tween.prototype.to=function(obj){this.reset();this._to=obj;return this};Tween.prototype.duration=function(ms){this._duration=ms;return this};Tween.prototype.ease=function(fn){fn="function"==typeof fn?fn:ease[fn];if(!fn)throw new TypeError("invalid easing function");this._ease=fn;return this};Tween.prototype.stop=function(){this.stopped=true;this._done=true;this.emit("stop");this.emit("end");return this};Tween.prototype.step=function(){if(this._done)return;var duration=this._duration;var now=Date.now();var delta=now-this._start;var done=delta>=duration;if(done){this._from=this._to;this._update(this._to);this._done=true;this.emit("end");return this}var from=this._from;var to=this._to;var curr=this._curr;var fn=this._ease;var p=(now-this._start)/duration;var n=fn(p);if(this.isArray){for(var i=0;i<from.length;++i){curr[i]=from[i]+(to[i]-from[i])*n}this._update(curr);return this}for(var k in from){curr[k]=from[k]+(to[k]-from[k])*n}this._update(curr);return this};Tween.prototype.update=function(fn){if(0==arguments.length)return this.step();this._update=fn;return this}},{clone:9,ease:24,emitter:10,type:13}],13:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],14:[function(require,module,exports){var domify=require("./lib/domify");var classes=require("./lib/classes");var matches=require("./lib/matches");var event=require("./lib/event");var mutation=require("./lib/mutation");exports=module.exports=dom;function dom(selector,context){if(!selector){throw new Error("no selector specified")}if(selector instanceof Array){return new List(selector)}var ctx=context;if(!ctx){ctx=document}else if(ctx instanceof List){ctx=context[0]}if(selector instanceof NodeList){var arr=[];for(var i=0;i<selector.length;++i){arr.push(selector[i])}return new List(arr,selector)}if(selector instanceof List){return selector}if(selector.nodeName){return new List([selector])}if(typeof selector==="string"){selector=selector.trim()}if("<"==selector.charAt(0)){return dom(domify(selector))}if("string"==typeof selector){return dom(ctx.querySelectorAll(selector),selector)}}exports.List=List;function List(els,selector){Array.prototype.push.apply(this,els);this.selector=selector}var proto=List.prototype;proto.attr=function(name,val){if(val===undefined){return this[0].getAttribute(name)}this[0].setAttribute(name,val);return this};proto.removeAttr=function(name){this[0].removeAttribute(name);return this};proto.data=function(key,value){return this.attr("data-"+key,value)};proto.clone=function(){var arr=[];for(var i=0,len=this.length;i<len;++i){arr.push(this[i].cloneNode(true))}return new List(arr)};proto.at=function(i){return new List([this[i]],this.selector)};proto.first=function(){return new List([this[0]],this.selector)};proto.last=function(){return new List([this[this.length-1]],this.selector)};proto.length=function(){return this.length};proto.text=function(val){if(val!==undefined){this[0].textContent=val;return this}var str="";for(var i=0;i<this.length;++i){str+=this[i].textContent}return str};proto.html=function(val){var el=this[0];if(val){if(typeof val!=="string"){throw new Error(".html() requires a string")}el.innerHTML=val;return this}return el.innerHTML};proto.on=function(name,selector,fn,capture){if("string"==typeof selector){var el=this[0];var deleg=function(e){var target=e.target;do{if(matches(target,selector)){var Event=function(e){for(var k in e){this[k]=e[k]}};var new_ev=new Event(e);new_ev.currentTarget=target;return fn.call(target,new_ev)}target=target.parentElement}while(target&&target!==el)};if(name==="mouseenter"){name="mouseover"}for(var i=0;i<this.length;++i){fn._delegate=deleg;event.bind(this[i],name,deleg,capture)}return this}capture=fn;fn=selector;for(var i=0;i<this.length;++i){event.bind(this[i],name,fn,capture)}return this};proto.off=function(name,selector,fn,capture){if("string"==typeof selector){for(var i=0;i<this.length;++i){delegate.unbind(this[i],name,fn._delegate,capture)}return this}capture=fn;fn=selector;for(var i=0;i<this.length;++i){event.unbind(this[i],name,fn,capture)}return this};proto.each=function(fn){for(var i=0;i<this.length;++i){fn(new List([this[i]],this.selector),i)}return this};proto.forEach=function(fn){Array.prototype.forEach.call(this,fn);return this};proto.map=function(fn){return Array.prototype.map.call(this,fn)};proto.select=function(){for(var i=0;i<this.length;++i){var el=this[i];el.select()}return this};proto.filter=function(fn){var els=Array.prototype.filter.call(this,function(el){return fn(new List([el],this.selector))});return new List(els,this.selector)};proto.value=function(val){var el=this[0];if(val){el.value=val;return this}return el.value};proto.offset=function(){var el=this[0];var curleft=0;var curtop=0;if(el.offsetParent){do{curleft+=el.offsetLeft;curtop+=el.offsetTop}while(el=el.offsetParent)}return{left:curleft,top:curtop}};proto.position=function(){var el=this[0];return{top:el.offsetTop,left:el.offsetLeft}};proto.outerHeight=function(){return this[0].offsetHeight};proto.innerHeight=function(){return this[0].clientHeight};proto.contentHeight=function(){var style=window.getComputedStyle(this[0],null);var ptop=style.getPropertyValue("padding-top").replace("px","")-0;var pbot=style.getPropertyValue("padding-bottom").replace("px","")-0;return this.innerHeight()-ptop-pbot};proto.scrollHeight=function(){return this[0].scrollHeight};proto.outerWidth=function(){return this[0].offsetWidth};proto.innerWidth=function(){return this[0].clientWidth};proto.contentWidth=function(){var style=window.getComputedStyle(this[0],null);var pleft=style.getPropertyValue("padding-left").replace("px","")-0;var pright=style.getPropertyValue("padding-right").replace("px","")-0;return this.innerWidth()-pleft-pright};proto.scrollWidth=function(){return this[0].scrollWidth};proto.addClass=function(name){var el;for(var i=0;i<this.length;++i){el=this[i];el._classes=el._classes||classes(el);el._classes.add(name)}return this};proto.removeClass=function(name){var el;for(var i=0;i<this.length;++i){el=this[i];el._classes=el._classes||classes(el);el._classes.remove(name)}return this};proto.toggleClass=function(name){var el;for(var i=0;i<this.length;++i){el=this[i];el._classes=el._classes||classes(el);el._classes.toggle(name)}return this};proto.hasClass=function(name){var el;for(var i=0;i<this.length;++i){el=this[i];el._classes=el._classes||classes(el);if(el._classes.has(name))return true}return false};proto.css=function(prop,val){if(prop instanceof Object){for(var p in prop){this.setStyle(p,prop[p])}}if(2==arguments.length){return this.setStyle(prop,val)}return this.getStyle(prop)};proto.setStyle=function(prop,val){for(var i=0;i<this.length;++i){this[i].style[prop]=val}return this};proto.getStyle=function(prop){var el=this[0];if(el)return el.style[prop]};proto.find=function(selector){return dom(selector,this)};proto.next=function(){var els=[];for(var i=0;i<this.length;++i){var next=this[i].nextElementSibling;if(next){els.push(next)}}return new List(els)};proto.prev=function(){var els=[];for(var i=0;i<this.length;++i){var next=this[i].previousElementSibling;if(next){els.push(next)}}return new List(els)};proto.emit=function(name,opt){event.emit(this[0],name,opt);return this};proto.parent=function(){var els=[];for(var i=0;i<this.length;++i){els.push(this[i].parentNode)}return new List(els)};proto.prepend=function(what){for(var i=0;i<this.length;++i){mutation.prepend(this[i],dom(what))}return this};proto.append=function(what){for(var i=0;i<this.length;++i){mutation.append(this[i],dom(what))}return this};proto.before=function(what){for(var i=0;i<this.length;++i){mutation.before(this[i],dom(what))}return this};proto.after=function(what){for(var i=0;i<this.length;++i){mutation.after(this[i],dom(what))}return this};proto.remove=function(){for(var i=0;i<this.length;++i){mutation.remove(this[i])}};proto.replace=function(what){for(var i=0;i<this.length;++i){mutation.replace(this[i],dom(what))}return this};proto.empty=function(){for(var i=0;i<this.length;++i){mutation.empty(this[i])}return this}},{"./lib/classes":15,"./lib/domify":16,"./lib/event":17,"./lib/matches":19,"./lib/mutation":20}],15:[function(require,module,exports){var re=/\s+/;module.exports=function(el){return new ClassList(el)};function ClassList(el){this.el=el;this.list=el.classList}ClassList.prototype.add=function(name){if(this.list){this.list.add(name);return this}var arr=this.array();var i=arr.indexOf(name);if(!~i){arr.push(name)}this.el.className=arr.join(" ");return this};ClassList.prototype.remove=function(name){if(this.list){this.list.remove(name);return this}var arr=this.array();var i=arr.indexOf(name);if(~i){arr.splice(i,1)}this.el.className=arr.join(" ");return this};ClassList.prototype.toggle=function(name){if(this.list){this.list.toggle(name);return this}if(this.has(name)){return this.remove(name)}return this.add(name)};ClassList.prototype.array=function(){var arr=this.el.className.split(re);if(""===arr[0]){arr.pop()}return arr};ClassList.prototype.has=function(name){return this.list?this.list.contains(name):!!~this.array().indexOf(name)}},{}],16:[function(require,module,exports){var map={option:[1,'<select multiple="multiple">',"</select>"],optgroup:[1,'<select multiple="multiple">',"</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tbody:[1,"<table>","</table>"],tfoot:[1,"<table>","</table>"],colgroup:[1,"<table>","</table>"],caption:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};module.exports=function(html){if(typeof html!=="string"){throw new TypeError("String expected")}var m=/<([\w:]+)/.exec(html);if(!m)throw new Error("No elements were generated.");var tag=m[1];if(tag=="body"){var el=document.createElement("html");el.innerHTML=html;return[el.removeChild(el.lastChild)]}var elements=[];var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=document.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--){el=el.lastChild}var els=[];var child=el.firstChild;do{els.push(child)}while(child=child.nextElementSibling);for(var i=0;i<els.length;++i){el.removeChild(els[i])}return els}},{}],17:[function(require,module,exports){exports.bind=function(el,type,fn,capture){if(el.addEventListener){el.addEventListener(type,fn,capture||false)}else{el.attachEvent("on"+type,fn)}return fn};exports.unbind=function(el,type,fn,capture){if(el.removeEventListener){el.removeEventListener(type,fn,capture||false)}else{el.detachEvent("on"+type,fn)}return fn};exports.emit=function(el,name,opts){opts=opts||{};var type=typeOf(name);var ev=document.createEvent(type+"s");var init=typeof ev["init"+type]==="function"?"init"+type:"initEvent";var sig=initSignatures[init];var args=[];var used={};opts.type=name;for(var i=0;i<sig.length;++i){var key=sig[i];var val=opts[key];if(val===undefined){val=ev[key]}args.push(val)}ev[init].apply(ev,args);for(var key in opts){if(!used[key]){ev[key]=opts[key]}}return el.dispatchEvent(ev)};var initSignatures=require("./init.json");var types=require("./types.json");var typeOf=function(){var typs={};for(var key in types){var ts=types[key];for(var i=0;i<ts.length;i++){typs[ts[i]]=key}}return function(name){return typs[name]||"Event"}}()},{"./init.json":18,"./types.json":21}],18:[function(require,module,exports){module.exports={initEvent:["type","bubbles","cancelable"],initUIEvent:["type","bubbles","cancelable","view","detail"],initMouseEvent:["type","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],initMutationEvent:["type","bubbles","cancelable","relatedNode","prevValue","newValue","attrName","attrChange"],initKeyEvent:["type","bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"]}},{}],19:[function(require,module,exports){var proto=Element.prototype;var vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=function match(el,selector){if(vendor){return vendor.call(el,selector)}var nodes=el.parentNode.querySelectorAll(selector);for(var i=0;i<nodes.length;++i){if(nodes[i]==el){return true}}return false}},{}],20:[function(require,module,exports){function mkfragment(elements){var frag=document.createDocumentFragment();for(var i=0;i<elements.length;++i){frag.appendChild(elements[i])}return frag}module.exports.remove=function(el){if(!el.parentNode){return}return el.parentNode.removeChild(el)};module.exports.replace=function(el,what){if(!el.parentNode){return}return el.parentNode.replaceChild(mkfragment(what),el)};module.exports.prepend=function(el,what){return el.insertBefore(mkfragment(what),el.firstChild)};module.exports.append=function(el,what){var frag=document.createDocumentFragment();return el.appendChild(mkfragment(what))};module.exports.after=function(el,what){if(!el.parentNode){return}if(!el.nextSilbling){return el.parentNode.appendChild(mkfragment(what))}return el.parentNode.insertBefore(mkfragment(what),el.nextSilbling)};module.exports.before=function(el,what){if(!el.parentNode){return}return el.parentNode.insertBefore(mkfragment(what),el)};module.exports.empty=function(parent){parent.innerHTML=""}},{}],21:[function(require,module,exports){module.exports={MouseEvent:["click","mousedown","mouseup","mouseover","mousemove","mouseout"],KeyEvent:["keydown","keyup","keypress"],MutationEvent:["DOMSubtreeModified","DOMNodeInserted","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","DOMAttrModified","DOMCharacterDataModified"],HTMLEvent:["load","unload","abort","error","select","change","submit","reset","focus","blur","resize","scroll"],UIEvent:["DOMFocusIn","DOMFocusOut","DOMActivate"]}},{}],22:[function(require,module,exports){module.exports=parse;var innerHTMLBug=false;var bugTestDiv;if(typeof document!=="undefined"){bugTestDiv=document.createElement("div");bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length;bugTestDiv=undefined}var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],23:[function(require,module,exports){!function(name,definition){if(typeof module!="undefined")module.exports=definition();else if(typeof define=="function"&&typeof define.amd=="object")define(definition);else this[name]=definition()}("domready",function(){var fns=[],listener,doc=document,hack=doc.documentElement.doScroll,domContentLoaded="DOMContentLoaded",loaded=(hack?/^loaded|^c/:/^loaded|^i|^c/).test(doc.readyState);if(!loaded)doc.addEventListener(domContentLoaded,listener=function(){doc.removeEventListener(domContentLoaded,listener);loaded=1;while(listener=fns.shift())listener()});return function(fn){loaded?setTimeout(fn,0):fns.push(fn)}})},{}],24:[function(require,module,exports){exports.linear=function(n){return n};exports.inQuad=function(n){return n*n};exports.outQuad=function(n){return n*(2-n)};exports.inOutQuad=function(n){n*=2;if(n<1)return.5*n*n;return-.5*(--n*(n-2)-1)};exports.inCube=function(n){return n*n*n};exports.outCube=function(n){return--n*n*n+1};exports.inOutCube=function(n){n*=2;if(n<1)return.5*n*n*n;return.5*((n-=2)*n*n+2)};exports.inQuart=function(n){return n*n*n*n};exports.outQuart=function(n){return 1- --n*n*n*n};exports.inOutQuart=function(n){n*=2;if(n<1)return.5*n*n*n*n;return-.5*((n-=2)*n*n*n-2)};exports.inQuint=function(n){return n*n*n*n*n};exports.outQuint=function(n){return--n*n*n*n*n+1};exports.inOutQuint=function(n){n*=2;if(n<1)return.5*n*n*n*n*n;return.5*((n-=2)*n*n*n*n+2)};exports.inSine=function(n){return 1-Math.cos(n*Math.PI/2)};exports.outSine=function(n){return Math.sin(n*Math.PI/2)};exports.inOutSine=function(n){return.5*(1-Math.cos(Math.PI*n))};exports.inExpo=function(n){return 0==n?0:Math.pow(1024,n-1)};exports.outExpo=function(n){return 1==n?n:1-Math.pow(2,-10*n)};exports.inOutExpo=function(n){if(0==n)return 0;if(1==n)return 1;if((n*=2)<1)return.5*Math.pow(1024,n-1);return.5*(-Math.pow(2,-10*(n-1))+2)};exports.inCirc=function(n){return 1-Math.sqrt(1-n*n)};exports.outCirc=function(n){return Math.sqrt(1- --n*n)};exports.inOutCirc=function(n){n*=2;if(n<1)return-.5*(Math.sqrt(1-n*n)-1);return.5*(Math.sqrt(1-(n-=2)*n)+1)};exports.inBack=function(n){var s=1.70158;return n*n*((s+1)*n-s)};exports.outBack=function(n){var s=1.70158;return--n*n*((s+1)*n+s)+1};exports.inOutBack=function(n){var s=1.70158*1.525;if((n*=2)<1)return.5*(n*n*((s+1)*n-s));return.5*((n-=2)*n*((s+1)*n+s)+2)};exports.inBounce=function(n){return 1-exports.outBounce(1-n)};exports.outBounce=function(n){if(n<1/2.75){return 7.5625*n*n}else if(n<2/2.75){return 7.5625*(n-=1.5/2.75)*n+.75}else if(n<2.5/2.75){return 7.5625*(n-=2.25/2.75)*n+.9375}else{return 7.5625*(n-=2.625/2.75)*n+.984375}};exports.inOutBounce=function(n){if(n<.5)return exports.inBounce(n*2)*.5;return exports.outBounce(n*2-1)*.5+.5};exports["in-quad"]=exports.inQuad;exports["out-quad"]=exports.outQuad;exports["in-out-quad"]=exports.inOutQuad;exports["in-cube"]=exports.inCube;exports["out-cube"]=exports.outCube;exports["in-out-cube"]=exports.inOutCube;
exports["in-quart"]=exports.inQuart;exports["out-quart"]=exports.outQuart;exports["in-out-quart"]=exports.inOutQuart;exports["in-quint"]=exports.inQuint;exports["out-quint"]=exports.outQuint;exports["in-out-quint"]=exports.inOutQuint;exports["in-sine"]=exports.inSine;exports["out-sine"]=exports.outSine;exports["in-out-sine"]=exports.inOutSine;exports["in-expo"]=exports.inExpo;exports["out-expo"]=exports.outExpo;exports["in-out-expo"]=exports.inOutExpo;exports["in-circ"]=exports.inCirc;exports["out-circ"]=exports.outCirc;exports["in-out-circ"]=exports.inOutCirc;exports["in-back"]=exports.inBack;exports["out-back"]=exports.outBack;exports["in-out-back"]=exports.inOutBack;exports["in-bounce"]=exports.inBounce;exports["out-bounce"]=exports.outBounce;exports["in-out-bounce"]=exports.inOutBounce},{}],25:[function(require,module,exports){(function(process,global){(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function lib$es6$promise$utils$$isFunction(x){return typeof x==="function"}function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==="object"&&x!==null}var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{lib$es6$promise$utils$$_isArray=Array.isArray}var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$toString={}.toString;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush)}else{lib$es6$promise$asap$$scheduleFlush()}}};function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn}function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn}var lib$es6$promise$asap$$browserWindow=typeof window!=="undefined"?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}var lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r("vertx");lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick()}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver()}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel()}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==="function"){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx()}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout()}function lib$es6$promise$$internal$$noop(){}var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value)}else{lib$es6$promise$$internal$$fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;lib$es6$promise$$internal$$reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error)}},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result)}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result)}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable)}else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error)}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then)}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}}function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment())}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value)}else{lib$es6$promise$$internal$$fulfill(promise,value)}}function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise)}}function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise)}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value)}else if(failed){lib$es6$promise$$internal$$reject(promise,error)}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value)}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value)},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor;enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop);if(enumerator._validateInput(input)){enumerator._input=input;enumerator.length=input.length;enumerator._remaining=input.length;enumerator._init();if(enumerator.length===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result)}else{enumerator.length=enumerator.length||0;enumerator._enumerate();if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result)}}}else{lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError())}}lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)};lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var enumerator=this;var length=enumerator.length;var promise=enumerator.promise;var input=enumerator._input;for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){enumerator._eachEntry(input[i],i)}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this;var c=enumerator._instanceConstructor;if(lib$es6$promise$utils$$isMaybeThenable(entry)){if(entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING){entry._onerror=null;enumerator._settledAt(entry._state,i,entry._result)}else{enumerator._willSettleAt(c.resolve(entry),i)}}else{enumerator._remaining--;enumerator._result[i]=entry}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this;var promise=enumerator.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){enumerator._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}else{enumerator._result[i]=value}}if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(promise,enumerator._result)}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries)){lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race."));return promise}var length=entries.length;function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),undefined,onFulfillment,onRejection)}return promise}var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise}var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise}var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;var lib$es6$promise$promise$$counter=0;function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++;this._state=undefined;this._result=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){if(!lib$es6$promise$utils$$isFunction(resolver)){lib$es6$promise$promise$$needsResolver()}if(!(this instanceof lib$es6$promise$promise$$Promise)){lib$es6$promise$promise$$needsNew()}lib$es6$promise$$internal$$initializePromise(this,resolver)}}lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this;var state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection){return this}var child=new this.constructor(lib$es6$promise$$internal$$noop);var result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection)}return child},"catch":function(onRejection){return this.then(null,onRejection)}};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==="[object Promise]"&&!P.cast){return}local.Promise=lib$es6$promise$promise$$default}var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;var lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};if(typeof define==="function"&&define["amd"]){define(function(){return lib$es6$promise$umd$$ES6Promise})}else if(typeof module!=="undefined"&&module["exports"]){module["exports"]=lib$es6$promise$umd$$ES6Promise}else if(typeof this!=="undefined"){this["ES6Promise"]=lib$es6$promise$umd$$ES6Promise}lib$es6$promise$polyfill$$default()}).call(this)}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:30}],26:[function(require,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],27:[function(require,module,exports){(function(process){"use strict";var pathtoRegexp=require("path-to-regexp");module.exports=page;var clickEvent="undefined"!==typeof document&&document.ontouchstart?"touchstart":"click";var location="undefined"!==typeof window&&(window.history.location||window.location);var dispatch=true;var decodeURLComponents=true;var base="";var running;var hashbang=false;var prevContext;function page(path,fn){if("function"===typeof path){return page("*",path)}if("function"===typeof fn){var route=new Route(path);for(var i=1;i<arguments.length;++i){page.callbacks.push(route.middleware(arguments[i]))}}else if("string"===typeof path){page["string"===typeof fn?"redirect":"show"](path,fn)}else{page.start(path)}}page.callbacks=[];page.exits=[];page.current="";page.len=0;page.base=function(path){if(0===arguments.length)return base;base=path};page.start=function(options){options=options||{};if(running)return;running=true;if(false===options.dispatch)dispatch=false;if(false===options.decodeURLComponents)decodeURLComponents=false;if(false!==options.popstate)window.addEventListener("popstate",onpopstate,false);if(false!==options.click){document.addEventListener(clickEvent,onclick,false)}if(true===options.hashbang)hashbang=true;if(!dispatch)return;var url=hashbang&&~location.hash.indexOf("#!")?location.hash.substr(2)+location.search:location.pathname+location.search+location.hash;page.replace(url,null,true,dispatch)};page.stop=function(){if(!running)return;page.current="";page.len=0;running=false;document.removeEventListener(clickEvent,onclick,false);window.removeEventListener("popstate",onpopstate,false)};page.show=function(path,state,dispatch,push){var ctx=new Context(path,state);page.current=ctx.path;if(false!==dispatch)page.dispatch(ctx);if(false!==ctx.handled&&false!==push)ctx.pushState();return ctx};page.back=function(path,state){if(page.len>0){history.back();page.len--}else if(path){setTimeout(function(){page.show(path,state)})}else{setTimeout(function(){page.show(base,state)})}};page.redirect=function(from,to){if("string"===typeof from&&"string"===typeof to){page(from,function(e){setTimeout(function(){page.replace(to)},0)})}if("string"===typeof from&&"undefined"===typeof to){setTimeout(function(){page.replace(from)},0)}};page.replace=function(path,state,init,dispatch){var ctx=new Context(path,state);page.current=ctx.path;ctx.init=init;ctx.save();if(false!==dispatch)page.dispatch(ctx);return ctx};page.dispatch=function(ctx){var prev=prevContext,i=0,j=0;prevContext=ctx;function nextExit(){var fn=page.exits[j++];if(!fn)return nextEnter();fn(prev,nextExit)}function nextEnter(){var fn=page.callbacks[i++];if(ctx.path!==page.current){ctx.handled=false;return}if(!fn)return unhandled(ctx);fn(ctx,nextEnter)}if(prev){nextExit()}else{nextEnter()}};function unhandled(ctx){if(ctx.handled)return;var current;if(hashbang){current=base+location.hash.replace("#!","")}else{current=location.pathname+location.search}if(current===ctx.canonicalPath)return;page.stop();ctx.handled=false;location.href=ctx.canonicalPath}page.exit=function(path,fn){if(typeof path==="function"){return page.exit("*",path)}var route=new Route(path);for(var i=1;i<arguments.length;++i){page.exits.push(route.middleware(arguments[i]))}};function decodeURLEncodedURIComponent(val){if(typeof val!=="string"){return val}return decodeURLComponents?decodeURIComponent(val.replace(/\+/g," ")):val}function Context(path,state){if("/"===path[0]&&0!==path.indexOf(base))path=base+(hashbang?"#!":"")+path;var i=path.indexOf("?");this.canonicalPath=path;this.path=path.replace(base,"")||"/";if(hashbang)this.path=this.path.replace("#!","")||"/";this.title=document.title;this.state=state||{};this.state.path=path;this.querystring=~i?decodeURLEncodedURIComponent(path.slice(i+1)):"";this.pathname=decodeURLEncodedURIComponent(~i?path.slice(0,i):path);this.params={};this.hash="";if(!hashbang){if(!~this.path.indexOf("#"))return;var parts=this.path.split("#");this.path=parts[0];this.hash=decodeURLEncodedURIComponent(parts[1])||"";this.querystring=this.querystring.split("#")[0]}}page.Context=Context;Context.prototype.pushState=function(){page.len++;history.pushState(this.state,this.title,hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};Context.prototype.save=function(){history.replaceState(this.state,this.title,hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function Route(path,options){options=options||{};this.path=path==="*"?"(.*)":path;this.method="GET";this.regexp=pathtoRegexp(this.path,this.keys=[],options.sensitive,options.strict)}page.Route=Route;Route.prototype.middleware=function(fn){var self=this;return function(ctx,next){if(self.match(ctx.path,ctx.params))return fn(ctx,next);next()}};Route.prototype.match=function(path,params){var keys=this.keys,qsIndex=path.indexOf("?"),pathname=~qsIndex?path.slice(0,qsIndex):path,m=this.regexp.exec(decodeURIComponent(pathname));if(!m)return false;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1];var val=decodeURLEncodedURIComponent(m[i]);if(val!==undefined||!hasOwnProperty.call(params,key.name)){params[key.name]=val}}return true};var onpopstate=function(){var loaded=false;if("undefined"===typeof window){return}if(document.readyState==="complete"){loaded=true}else{window.addEventListener("load",function(){setTimeout(function(){loaded=true},0)})}return function onpopstate(e){if(!loaded)return;if(e.state){var path=e.state.path;page.replace(path,e.state)}else{page.show(location.pathname+location.hash,undefined,undefined,false)}}}();function onclick(e){if(1!==which(e))return;if(e.metaKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;var el=e.target;while(el&&"A"!==el.nodeName)el=el.parentNode;if(!el||"A"!==el.nodeName)return;if(el.hasAttribute("download")||el.getAttribute("rel")==="external")return;var link=el.getAttribute("href");if(!hashbang&&el.pathname===location.pathname&&(el.hash||"#"===link))return;if(link&&link.indexOf("mailto:")>-1)return;if(el.target)return;if(!sameOrigin(el.href))return;var path=el.pathname+el.search+(el.hash||"");if(typeof process!=="undefined"&&path.match(/^\/[a-zA-Z]:\//)){path=path.replace(/^\/[a-zA-Z]:\//,"/")}var orig=path;if(path.indexOf(base)===0){path=path.substr(base.length)}if(hashbang)path=path.replace("#!","");if(base&&orig===path)return;e.preventDefault();page.show(orig)}function which(e){e=e||window.event;return null===e.which?e.button:e.which}function sameOrigin(href){var origin=location.protocol+"//"+location.hostname;if(location.port)origin+=":"+location.port;return href&&0===href.indexOf(origin)}page.sameOrigin=sameOrigin}).call(this,require("_process"))},{_process:30,"path-to-regexp":28}],28:[function(require,module,exports){var isarray=require("isarray");module.exports=pathToRegexp;module.exports.parse=parse;module.exports.compile=compile;module.exports.tokensToFunction=tokensToFunction;module.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse(str){var tokens=[];var key=0;var index=0;var path="";var res;while((res=PATH_REGEXP.exec(str))!=null){var m=res[0];var escaped=res[1];var offset=res.index;path+=str.slice(index,offset);index=offset+m.length;if(escaped){path+=escaped[1];continue}if(path){tokens.push(path);path=""}var prefix=res[2];var name=res[3];var capture=res[4];var group=res[5];var suffix=res[6];var asterisk=res[7];var repeat=suffix==="+"||suffix==="*";var optional=suffix==="?"||suffix==="*";var delimiter=prefix||"/";var pattern=capture||group||(asterisk?".*":"[^"+delimiter+"]+?");tokens.push({name:name||key++,prefix:prefix||"",delimiter:delimiter,optional:optional,repeat:repeat,pattern:escapeGroup(pattern)})}if(index<str.length){path+=str.substr(index)}if(path){tokens.push(path)}return tokens}function compile(str){return tokensToFunction(parse(str))}function tokensToFunction(tokens){var matches=new Array(tokens.length);for(var i=0;i<tokens.length;i++){if(typeof tokens[i]==="object"){matches[i]=new RegExp("^"+tokens[i].pattern+"$")}}return function(obj){var path="";var data=obj||{};for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==="string"){path+=token;continue}var value=data[token.name];var segment;if(value==null){if(token.optional){continue}else{throw new TypeError('Expected "'+token.name+'" to be defined')}}if(isarray(value)){if(!token.repeat){throw new TypeError('Expected "'+token.name+'" to not repeat, but received "'+value+'"')}if(value.length===0){if(token.optional){continue}else{throw new TypeError('Expected "'+token.name+'" to not be empty')}}for(var j=0;j<value.length;j++){segment=encodeURIComponent(value[j]);if(!matches[i].test(segment)){throw new TypeError('Expected all "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"')}path+=(j===0?token.prefix:token.delimiter)+segment}continue}segment=encodeURIComponent(value);if(!matches[i].test(segment)){throw new TypeError('Expected "'+token.name+'" to match "'+token.pattern+'", but received "'+segment+'"')}path+=token.prefix+segment}return path}}function escapeString(str){return str.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function escapeGroup(group){return group.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys(re,keys){re.keys=keys;return re}function flags(options){return options.sensitive?"":"i"}function regexpToRegexp(path,keys){var groups=path.source.match(/\((?!\?)/g);if(groups){for(var i=0;i<groups.length;i++){keys.push({name:i,prefix:null,delimiter:null,optional:false,repeat:false,pattern:null})}}return attachKeys(path,keys)}function arrayToRegexp(path,keys,options){var parts=[];for(var i=0;i<path.length;i++){parts.push(pathToRegexp(path[i],keys,options).source)}var regexp=new RegExp("(?:"+parts.join("|")+")",flags(options));return attachKeys(regexp,keys)}function stringToRegexp(path,keys,options){var tokens=parse(path);var re=tokensToRegExp(tokens,options);for(var i=0;i<tokens.length;i++){if(typeof tokens[i]!=="string"){keys.push(tokens[i])}}return attachKeys(re,keys)}function tokensToRegExp(tokens,options){options=options||{};var strict=options.strict;var end=options.end!==false;var route="";var lastToken=tokens[tokens.length-1];var endsWithSlash=typeof lastToken==="string"&&/\/$/.test(lastToken);for(var i=0;i<tokens.length;i++){var token=tokens[i];if(typeof token==="string"){route+=escapeString(token)}else{var prefix=escapeString(token.prefix);var capture=token.pattern;if(token.repeat){capture+="(?:"+prefix+capture+")*"}if(token.optional){if(prefix){capture="(?:"+prefix+"("+capture+"))?"}else{capture="("+capture+")?"}}else{capture=prefix+"("+capture+")"}route+=capture}}if(!strict){route=(endsWithSlash?route.slice(0,-2):route)+"(?:\\/(?=$))?"}if(end){route+="$"}else{route+=strict&&endsWithSlash?"":"(?=\\/|$)"}return new RegExp("^"+route,flags(options))}function pathToRegexp(path,keys,options){keys=keys||[];if(!isarray(keys)){options=keys;keys=[]}else if(!options){options={}}if(path instanceof RegExp){return regexpToRegexp(path,keys,options)}if(isarray(path)){return arrayToRegexp(path,keys,options)}return stringToRegexp(path,keys,options)}},{isarray:26}],29:[function(require,module,exports){(function(global){(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.payment||(g.payment={})).js=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var QJ,rreturn,rtrim;QJ=function(selector){if(QJ.isDOMElement(selector)){return selector}return document.querySelectorAll(selector)};QJ.isDOMElement=function(el){return el&&el.nodeName!=null};rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;QJ.trim=function(text){if(text===null){return""}else{return(text+"").replace(rtrim,"")}};rreturn=/\r/g;QJ.val=function(el,val){var ret;if(arguments.length>1){return el.value=val}else{ret=el.value;if(typeof ret==="string"){return ret.replace(rreturn,"")}else{if(ret===null){return""}else{return ret}}}};QJ.preventDefault=function(eventObject){if(typeof eventObject.preventDefault==="function"){eventObject.preventDefault();return}eventObject.returnValue=false;return false};QJ.normalizeEvent=function(e){var original;original=e;e={which:original.which!=null?original.which:void 0,target:original.target||original.srcElement,preventDefault:function(){return QJ.preventDefault(original)},originalEvent:original,data:original.data||original.detail};if(e.which==null){e.which=original.charCode!=null?original.charCode:original.keyCode}return e};QJ.on=function(element,eventName,callback){
var el,i,j,len,len1,multEventName,originalCallback,ref;if(element.length){for(i=0,len=element.length;i<len;i++){el=element[i];QJ.on(el,eventName,callback)}return}if(eventName.match(" ")){ref=eventName.split(" ");for(j=0,len1=ref.length;j<len1;j++){multEventName=ref[j];QJ.on(element,multEventName,callback)}return}originalCallback=callback;callback=function(e){e=QJ.normalizeEvent(e);return originalCallback(e)};if(element.addEventListener){return element.addEventListener(eventName,callback,false)}if(element.attachEvent){eventName="on"+eventName;return element.attachEvent(eventName,callback)}element["on"+eventName]=callback};QJ.addClass=function(el,className){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.addClass(e,className))}return results}()}if(el.classList){return el.classList.add(className)}else{return el.className+=" "+className}};QJ.hasClass=function(el,className){var e,hasClass,i,len;if(el.length){hasClass=true;for(i=0,len=el.length;i<len;i++){e=el[i];hasClass=hasClass&&QJ.hasClass(e,className)}return hasClass}if(el.classList){return el.classList.contains(className)}else{return new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}};QJ.removeClass=function(el,className){var cls,e,i,len,ref,results;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.removeClass(e,className))}return results}()}if(el.classList){ref=className.split(" ");results=[];for(i=0,len=ref.length;i<len;i++){cls=ref[i];results.push(el.classList.remove(cls))}return results}else{return el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}};QJ.toggleClass=function(el,className,bool){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.toggleClass(e,className,bool))}return results}()}if(bool){if(!QJ.hasClass(el,className)){return QJ.addClass(el,className)}}else{return QJ.removeClass(el,className)}};QJ.append=function(el,toAppend){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.append(e,toAppend))}return results}()}return el.insertAdjacentHTML("beforeend",toAppend)};QJ.find=function(el,selector){if(el instanceof NodeList||el instanceof Array){el=el[0]}return el.querySelectorAll(selector)};QJ.trigger=function(el,name,data){var e,error,ev;try{ev=new CustomEvent(name,{detail:data})}catch(error){e=error;ev=document.createEvent("CustomEvent");if(ev.initCustomEvent){ev.initCustomEvent(name,true,true,data)}else{ev.initEvent(name,true,true,data)}}return el.dispatchEvent(ev)};module.exports=QJ},{}],2:[function(require,module,exports){(function(global){var Payment,QJ,cardFromNumber,cardFromType,cards,defaultFormat,formatBackCardNumber,formatBackExpiry,formatCardNumber,formatExpiry,formatForwardExpiry,formatForwardSlash,formatMonthExpiry,hasTextSelected,luhnCheck,reFormatCardNumber,restrictCVC,restrictCardNumber,restrictCombinedExpiry,restrictExpiry,restrictMonthExpiry,restrictNumeric,restrictYearExpiry,setCardType,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};QJ=require("qj/src/qj.coffee");defaultFormat=/(\d{1,4})/g;cards=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:true},{type:"dankort",pattern:/^5019/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:defaultFormat,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"jcb",pattern:/^35/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"laser",pattern:/^(6706|6771|6709)/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6759|676[1-3])/,format:defaultFormat,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[1-5]/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^62/,format:defaultFormat,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"elo",pattern:/^4011|438935|45(1416|76)|50(4175|6699|67|90[4-7])|63(6297|6368)/,format:defaultFormat,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:defaultFormat,length:[13,16],cvcLength:[3],luhn:true}];cardFromNumber=function(num){var card,i,len;num=(num+"").replace(/\D/g,"");for(i=0,len=cards.length;i<len;i++){card=cards[i];if(card.pattern.test(num)){return card}}};cardFromType=function(type){var card,i,len;for(i=0,len=cards.length;i<len;i++){card=cards[i];if(card.type===type){return card}}};luhnCheck=function(num){var digit,digits,i,len,odd,sum;odd=true;sum=0;digits=(num+"").split("").reverse();for(i=0,len=digits.length;i<len;i++){digit=digits[i];digit=parseInt(digit,10);if(odd=!odd){digit*=2}if(digit>9){digit-=9}sum+=digit}return sum%10===0};hasTextSelected=function(target){var ref;if(target.selectionStart!=null&&target.selectionStart!==target.selectionEnd){return true}if((typeof document!=="undefined"&&document!==null?(ref=document.selection)!=null?ref.createRange:void 0:void 0)!=null){if(document.selection.createRange().text){return true}}return false};reFormatCardNumber=function(e){return setTimeout(function(_this){return function(){var target,value;target=e.target;value=QJ.val(target);value=Payment.fns.formatCardNumber(value);return QJ.val(target,value)}}(this))};formatCardNumber=function(e){var card,digit,length,re,target,upperLength,value;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}target=e.target;value=QJ.val(target);card=cardFromNumber(value+digit);length=(value.replace(/\D/g,"")+digit).length;upperLength=16;if(card){upperLength=card.length[card.length.length-1]}if(length>=upperLength){return}if(target.selectionStart!=null&&target.selectionStart!==value.length){return}if(card&&card.type==="amex"){re=/^(\d{4}|\d{4}\s\d{6})$/}else{re=/(?:^|\s)(\d{4})$/}if(re.test(value)){e.preventDefault();return QJ.val(target,value+" "+digit)}else if(re.test(value+digit)){e.preventDefault();return QJ.val(target,value+digit+" ")}};formatBackCardNumber=function(e){var target,value;target=e.target;value=QJ.val(target);if(e.meta){return}if(e.which!==8){return}if(target.selectionStart!=null&&target.selectionStart!==value.length){return}if(/\d\s$/.test(value)){e.preventDefault();return QJ.val(target,value.replace(/\d\s$/,""))}else if(/\s\d?$/.test(value)){e.preventDefault();return QJ.val(target,value.replace(/\s\d?$/,""))}};formatExpiry=function(e){var digit,target,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}target=e.target;val=QJ.val(target)+digit;if(/^\d$/.test(val)&&(val!=="0"&&val!=="1")){e.preventDefault();return QJ.val(target,"0"+val+" / ")}else if(/^\d\d$/.test(val)){e.preventDefault();return QJ.val(target,val+" / ")}};formatMonthExpiry=function(e){var digit,target,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}target=e.target;val=QJ.val(target)+digit;if(/^\d$/.test(val)&&(val!=="0"&&val!=="1")){e.preventDefault();return QJ.val(target,"0"+val)}else if(/^\d\d$/.test(val)){e.preventDefault();return QJ.val(target,""+val)}};formatForwardExpiry=function(e){var digit,target,val;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}target=e.target;val=QJ.val(target);if(/^\d\d$/.test(val)){return QJ.val(target,val+" / ")}};formatForwardSlash=function(e){var slash,target,val;slash=String.fromCharCode(e.which);if(slash!=="/"){return}target=e.target;val=QJ.val(target);if(/^\d$/.test(val)&&val!=="0"){return QJ.val(target,"0"+val+" / ")}};formatBackExpiry=function(e){var target,value;if(e.metaKey){return}target=e.target;value=QJ.val(target);if(e.which!==8){return}if(target.selectionStart!=null&&target.selectionStart!==value.length){return}if(/\d(\s|\/)+$/.test(value)){e.preventDefault();return QJ.val(target,value.replace(/\d(\s|\/)*$/,""))}else if(/\s\/\s?\d?$/.test(value)){e.preventDefault();return QJ.val(target,value.replace(/\s\/\s?\d?$/,""))}};restrictNumeric=function(e){var input;if(e.metaKey||e.ctrlKey){return true}if(e.which===32){return e.preventDefault()}if(e.which===0){return true}if(e.which<33){return true}input=String.fromCharCode(e.which);if(!/[\d\s]/.test(input)){return e.preventDefault()}};restrictCardNumber=function(e){var card,digit,target,value;target=e.target;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected(target)){return}value=(QJ.val(target)+digit).replace(/\D/g,"");card=cardFromNumber(value);if(card){if(!(value.length<=card.length[card.length.length-1])){return e.preventDefault()}}else{if(!(value.length<=16)){return e.preventDefault()}}};restrictExpiry=function(e,length){var digit,target,value;target=e.target;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected(target)){return}value=QJ.val(target)+digit;value=value.replace(/\D/g,"");if(value.length>length){return e.preventDefault()}};restrictCombinedExpiry=function(e){return restrictExpiry(e,6)};restrictMonthExpiry=function(e){return restrictExpiry(e,2)};restrictYearExpiry=function(e){return restrictExpiry(e,4)};restrictCVC=function(e){var digit,target,val;target=e.target;digit=String.fromCharCode(e.which);if(!/^\d+$/.test(digit)){return}if(hasTextSelected(target)){return}val=QJ.val(target)+digit;if(!(val.length<=4)){return e.preventDefault()}};setCardType=function(e){var allTypes,card,cardType,target,val;target=e.target;val=QJ.val(target);cardType=Payment.fns.cardType(val)||"unknown";if(!QJ.hasClass(target,cardType)){allTypes=function(){var i,len,results;results=[];for(i=0,len=cards.length;i<len;i++){card=cards[i];results.push(card.type)}return results}();QJ.removeClass(target,"unknown");QJ.removeClass(target,allTypes.join(" "));QJ.addClass(target,cardType);QJ.toggleClass(target,"identified",cardType!=="unknown");return QJ.trigger(target,"payment.cardType",cardType)}};Payment=function(){function Payment(){}Payment.fns={cardExpiryVal:function(value){var month,prefix,ref,year;value=value.replace(/\s/g,"");ref=value.split("/",2),month=ref[0],year=ref[1];if((year!=null?year.length:void 0)===2&&/^\d+$/.test(year)){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year}month=parseInt(month,10);year=parseInt(year,10);return{month:month,year:year}},validateCardNumber:function(num){var card,ref;num=(num+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(num)){return false}card=cardFromNumber(num);if(!card){return false}return(ref=num.length,indexOf.call(card.length,ref)>=0)&&(card.luhn===false||luhnCheck(num))},validateCardExpiry:function(month,year){var currentTime,expiry,prefix,ref;if(typeof month==="object"&&"month"in month){ref=month,month=ref.month,year=ref.year}if(!(month&&year)){return false}month=QJ.trim(month);year=QJ.trim(year);if(!/^\d+$/.test(month)){return false}if(!/^\d+$/.test(year)){return false}if(!(parseInt(month,10)<=12)){return false}if(year.length===2){prefix=(new Date).getFullYear();prefix=prefix.toString().slice(0,2);year=prefix+year}expiry=new Date(year,month);currentTime=new Date;expiry.setMonth(expiry.getMonth()-1);expiry.setMonth(expiry.getMonth()+1,1);return expiry>currentTime},validateCardCVC:function(cvc,type){var ref,ref1;cvc=QJ.trim(cvc);if(!/^\d+$/.test(cvc)){return false}if(type&&cardFromType(type)){return ref=cvc.length,indexOf.call((ref1=cardFromType(type))!=null?ref1.cvcLength:void 0,ref)>=0}else{return cvc.length>=3&&cvc.length<=4}},cardType:function(num){var ref;if(!num){return null}return((ref=cardFromNumber(num))!=null?ref.type:void 0)||null},formatCardNumber:function(num){var card,groups,ref,upperLength;card=cardFromNumber(num);if(!card){return num}upperLength=card.length[card.length.length-1];num=num.replace(/\D/g,"");num=num.slice(0,+upperLength+1||9e9);if(card.format.global){return(ref=num.match(card.format))!=null?ref.join(" "):void 0}else{groups=card.format.exec(num);if(groups!=null){groups.shift()}return groups!=null?groups.join(" "):void 0}}};Payment.restrictNumeric=function(el){return QJ.on(el,"keypress",restrictNumeric)};Payment.cardExpiryVal=function(el){return Payment.fns.cardExpiryVal(QJ.val(el))};Payment.formatCardCVC=function(el){Payment.restrictNumeric(el);QJ.on(el,"keypress",restrictCVC);return el};Payment.formatCardExpiry=function(el){var month,year;Payment.restrictNumeric(el);if(el.length&&el.length===2){month=el[0],year=el[1];this.formatCardExpiryMultiple(month,year)}else{QJ.on(el,"keypress",restrictCombinedExpiry);QJ.on(el,"keypress",formatExpiry);QJ.on(el,"keypress",formatForwardSlash);QJ.on(el,"keypress",formatForwardExpiry);QJ.on(el,"keydown",formatBackExpiry)}return el};Payment.formatCardExpiryMultiple=function(month,year){QJ.on(month,"keypress",restrictMonthExpiry);QJ.on(month,"keypress",formatMonthExpiry);return QJ.on(year,"keypress",restrictYearExpiry)};Payment.formatCardNumber=function(el){Payment.restrictNumeric(el);QJ.on(el,"keypress",restrictCardNumber);QJ.on(el,"keypress",formatCardNumber);QJ.on(el,"keydown",formatBackCardNumber);QJ.on(el,"keyup",setCardType);QJ.on(el,"paste",reFormatCardNumber);return el};Payment.getCardArray=function(){return cards};Payment.setCardArray=function(cardArray){cards=cardArray;return true};Payment.addToCardArray=function(cardObject){return cards.push(cardObject)};Payment.removeFromCardArray=function(type){var key,value;for(key in cards){value=cards[key];if(value.type===type){cards.splice(key,1)}}return true};return Payment}();module.exports=Payment;global.Payment=Payment}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"qj/src/qj.coffee":1}]},{},[2])(2)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"qj/src/qj.coffee":31}],30:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],31:[function(require,module,exports){var QJ,rreturn,rtrim;QJ=function(selector){if(QJ.isDOMElement(selector)){return selector}return document.querySelectorAll(selector)};QJ.isDOMElement=function(el){return el&&el.nodeName!=null};rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;QJ.trim=function(text){if(text===null){return""}else{return(text+"").replace(rtrim,"")}};rreturn=/\r/g;QJ.val=function(el,val){var ret;if(arguments.length>1){return el.value=val}else{ret=el.value;if(typeof ret==="string"){return ret.replace(rreturn,"")}else{if(ret===null){return""}else{return ret}}}};QJ.preventDefault=function(eventObject){if(typeof eventObject.preventDefault==="function"){eventObject.preventDefault();return}eventObject.returnValue=false;return false};QJ.normalizeEvent=function(e){var original;original=e;e={which:original.which!=null?original.which:void 0,target:original.target||original.srcElement,preventDefault:function(){return QJ.preventDefault(original)},originalEvent:original,data:original.data||original.detail};if(e.which==null){e.which=original.charCode!=null?original.charCode:original.keyCode}return e};QJ.on=function(element,eventName,callback){var el,i,j,len,len1,multEventName,originalCallback,ref;if(element.length){for(i=0,len=element.length;i<len;i++){el=element[i];QJ.on(el,eventName,callback)}return}if(eventName.match(" ")){ref=eventName.split(" ");for(j=0,len1=ref.length;j<len1;j++){multEventName=ref[j];QJ.on(element,multEventName,callback)}return}originalCallback=callback;callback=function(e){e=QJ.normalizeEvent(e);return originalCallback(e)};if(element.addEventListener){return element.addEventListener(eventName,callback,false)}if(element.attachEvent){eventName="on"+eventName;return element.attachEvent(eventName,callback)}element["on"+eventName]=callback};QJ.addClass=function(el,className){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.addClass(e,className))}return results}()}if(el.classList){return el.classList.add(className)}else{return el.className+=" "+className}};QJ.hasClass=function(el,className){var e,hasClass,i,len;if(el.length){hasClass=true;for(i=0,len=el.length;i<len;i++){e=el[i];hasClass=hasClass&&QJ.hasClass(e,className)}return hasClass}if(el.classList){return el.classList.contains(className)}else{return new RegExp("(^| )"+className+"( |$)","gi").test(el.className)}};QJ.removeClass=function(el,className){var cls,e,i,len,ref,results;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.removeClass(e,className))}return results}()}if(el.classList){ref=className.split(" ");results=[];for(i=0,len=ref.length;i<len;i++){cls=ref[i];results.push(el.classList.remove(cls))}return results}else{return el.className=el.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}};QJ.toggleClass=function(el,className,bool){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.toggleClass(e,className,bool))}return results}()}if(bool){if(!QJ.hasClass(el,className)){return QJ.addClass(el,className)}}else{return QJ.removeClass(el,className)}};QJ.append=function(el,toAppend){var e;if(el.length){return function(){var i,len,results;results=[];for(i=0,len=el.length;i<len;i++){e=el[i];results.push(QJ.append(e,toAppend))}return results}()}return el.insertAdjacentHTML("beforeend",toAppend)};QJ.find=function(el,selector){if(el instanceof NodeList||el instanceof Array){el=el[0]}return el.querySelectorAll(selector)};QJ.trigger=function(el,name,data){var e,error,ev;try{ev=new CustomEvent(name,{detail:data})}catch(error){e=error;ev=document.createEvent("CustomEvent");if(ev.initCustomEvent){ev.initCustomEvent(name,true,true,data)}else{ev.initEvent(name,true,true,data)}}return el.dispatchEvent(ev)};module.exports=QJ},{}],32:[function(require,module,exports){var Tween=require("tween");var raf=require("raf");module.exports=scrollTo;function scrollTo(x,y,options){options=options||{};var start=scroll();var tween=Tween(start).ease(options.ease||"out-circ").to({top:y,left:x}).duration(options.duration||1e3);tween.update(function(o){window.scrollTo(o.left|0,o.top|0)});tween.on("end",function(){animate=function(){}});function animate(){raf(animate);tween.update()}animate();return tween}function scroll(){var y=window.pageYOffset||document.documentElement.scrollTop;var x=window.pageXOffset||document.documentElement.scrollLeft;return{top:y,left:x}}},{raf:11,tween:12}],33:[function(require,module,exports){(function(){"use strict";if(self.fetch){return}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(!body){this._bodyText=""}else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body)){}else{throw new Error("unsupported BodyInit type")}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)}}if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else{this.url=input}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this)};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this._initBody(bodyInit);this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||""}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!init){request=input}else{request=new Request(input,init)}var xhr=new XMLHttpRequest;function responseURL(){if("responseURL"in xhr){return xhr.responseURL}if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())){return xhr.getResponseHeader("X-Request-URL")}return}xhr.onload=function(){var status=xhr.status===1223?204:xhr.status;if(status<100||status>599){reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true})()},{}]},{},[1]);